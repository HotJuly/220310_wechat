# 小程序路由跳转

1. VueRouter复习
   1. VueRouter是用来实现单页面应用(SPA)的插件库
      1. 问题:请问什么是单页面应用?
         1. 一个html文件就是一个页面
         2. 单页面应用就是整个项目只有一个html文件,通过DOM的CRUD方法对该html文件进行操作,实现页面的局部更新效果
   2. VueRouter路由跳转方式
      1. 声明式导航
         1. **定义:通过在页面上生成标签的形式,引导用户进行跳转,这类操作称为声明式导航**
         2. 例如:router-link组件等
      2. 编程式导航
         1. **定义:通过js的API,控制用户的跳转,这类操作称为编程式导航**
         2. 例如:push方法,replace方法等
   3. VueRouter传参方式
      1. query
         1. 属于URL传参
         2. 语法:"/home?username=xiaoming"
      2. params
         1. 属于URL传参
         2. 语法:"/home/1"
         3. 注意:
            1. 使用params传参,需要在声明路由的时候,写好占位符
               1. path:"/home/:id"
      3. meta
         1. 不属于URL传参
         2. 语法:
            1. 在声明路由的时候,可以在path,component属性同级下,创建meta属性,并注入数据
            2. 在当前路由显示的时候,可以通过this.$route.meta获取到流程1中准备的meta数据

2. 小程序路由跳转

   1. 声明式导航
      1. 组件名:navigator
   2. 编程式导航
      1. wx.navigateTo(配置对象)
         1. 作用:**保留当前页面(保留当前页面的实例对象)**，跳转到应用内的某个页面
         2. 类似于VueRouter中的push方法+keep-alive的效果
            1. 会将当前历史记录存入历史记录栈,后续可以返回到当前页面
         3. 注意:
            1. 如果写的url是相对路径,那么就会参考当前所在的文件夹进行路径拼接
            2. 如果写的url是绝对路径,那么就会将当前项目app.json文件所在文件夹作为根路径使用过
            3. **与push方法的区别,跳转下一个页面,当前页面会被隐藏起来,不会被卸载**
            4. **小程序中页面栈最多十层,早期是五层**
               1. **相当于Vue的keep-alive写了max="10"**
               2. **如果达到了十层的缓存上限,再次跳转页面,将无法跳转**
      2. wx.redirectTo(配置对象)
         1. 作用:**关闭当前页面**，跳转到应用内的某个页面
         2. 使用语法与wx.navigateTo几乎相同
         3. 类似于VueRouter中的replace方法
            1. 会将历史记录栈中最后一个访问记录进行覆盖,后续无法返回到当前页面

3. Vue中的keep-alive组件

   1. **作用:可以让内部本该卸载销毁的组件实例不销毁,让他被缓存起来,下次需要使用可以直接复用上次缓存的实例对象,不需要再次挂载**

   2. **使用场景:使用keep-alive组件缓存显示过的路由组件,防止因为路由的切换导致路由组件被卸载,数据丢失的情况**

   3. 标签属性

      1. include属性

         1. 只有名称匹配的组件才会被缓存

         2. ```vue
            <keep-alive include="A">
            	<A/>
              	<B/>
            </keep-alive>
            以上写法的意思是,只缓存name为A组件,这里的name指的是组件中的name属性
            ```

            ​

      2. exclude属性

         1. 除了名称匹配的组件,其余组件都缓存

         2. ```vue
            <keep-alive exclude="A">
            	<A/>
              	<B/>
            </keep-alive>
            以上写法的意思是,除了name为A组件,其余组件都缓存,这里的name指的是组件中的name属性
            ```

            ​

      3. **max属性**

         1. **keep-alive会将本该销毁的实例对象进行存储,那么就会占用更多的内容空间**
         2. **作用:最多可以缓存多少组件实例**
         3. **如果缓存的实例对象已经达到max上限了,又开启一个新的组件,会出现的情况**
            1. **在新实例被创建之前，已缓存组件中最久没有被访问的实例会被销毁掉**